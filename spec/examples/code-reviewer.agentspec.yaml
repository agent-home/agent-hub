# AgentSpec ç¤ºä¾‹ï¼šä»£ç å®¡æŸ¥æ™ºèƒ½ä½“
version: "1.0.0"

metadata:
  name: code-reviewer
  description: ä¸“ä¸šçš„ä»£ç å®¡æŸ¥æ™ºèƒ½ä½“ï¼Œæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œæä¾›ä»£ç è´¨é‡åˆ†æã€å®‰å…¨æ¼æ´æ£€æµ‹å’Œä¼˜åŒ–å»ºè®®
  author: agenthub
  license: Apache-2.0
  tags:
    - coding
    - review
    - security
    - quality
  category: coding
  repository: https://github.com/agenthub/code-reviewer

runtime:
  type: python
  entry: agent.py
  python:
    version: "3.11"
    requirements: requirements.txt

model:
  provider: anthropic
  name: claude-3-5-sonnet
  parameters:
    temperature: 0.3
    max_tokens: 8192

capabilities:
  streaming: true
  multimodal:
    text: true
    image: true  # æ”¯æŒä»£ç æˆªå›¾
  tools:
    - name: analyze_code
      description: åˆ†æä»£ç ç»“æ„å’Œå¤æ‚åº¦
      parameters:
        type: object
        properties:
          code:
            type: string
            description: è¦åˆ†æçš„ä»£ç 
          language:
            type: string
            description: ç¼–ç¨‹è¯­è¨€
        required: [code]
    - name: check_security
      description: æ£€æŸ¥å®‰å…¨æ¼æ´
      parameters:
        type: object
        properties:
          code:
            type: string
          rules:
            type: array
            items:
              type: string
        required: [code]
    - name: suggest_refactor
      description: æä¾›é‡æ„å»ºè®®
      parameters:
        type: object
        properties:
          code:
            type: string
          target:
            type: string
            enum: [performance, readability, maintainability]
        required: [code]
  memory:
    conversation: true
    long_term: false
    vector_store: true  # å­˜å‚¨ä»£ç åº“ä¸Šä¸‹æ–‡

interface:
  input:
    type: json
    schema:
      type: object
      properties:
        code:
          type: string
          description: è¦å®¡æŸ¥çš„ä»£ç 
        language:
          type: string
          description: ç¼–ç¨‹è¯­è¨€
        context:
          type: string
          description: é¢å¤–ä¸Šä¸‹æ–‡ä¿¡æ¯
      required: [code]
  output:
    type: json
    schema:
      type: object
      properties:
        summary:
          type: string
          description: å®¡æŸ¥æ€»ç»“
        issues:
          type: array
          items:
            type: object
            properties:
              severity:
                type: string
                enum: [critical, warning, info]
              line:
                type: integer
              message:
                type: string
              suggestion:
                type: string
        score:
          type: integer
          description: ä»£ç è´¨é‡è¯„åˆ† (0-100)

prompts:
  system_file: prompts/code_reviewer_system.md
  examples:
    - input: |
        è¯·å®¡æŸ¥è¿™æ®µPythonä»£ç ï¼š
        def login(username, password):
            query = f"SELECT * FROM users WHERE username='{username}' AND password='{password}'"
            return db.execute(query)
      output: |
        ## ä»£ç å®¡æŸ¥ç»“æœ
        
        ### ğŸ”´ ä¸¥é‡é—®é¢˜
        1. **SQLæ³¨å…¥æ¼æ´** (ç¬¬2è¡Œ)
           - ç›´æ¥æ‹¼æ¥ç”¨æˆ·è¾“å…¥åˆ°SQLè¯­å¥
           - å»ºè®®ï¼šä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
        
        ### è¯„åˆ†: 20/100

resources:
  cpu: "2"
  memory: "1Gi"
  timeout: 120

pricing:
  model: pay-per-use
  price_per_call: 0.01
